<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title></title>
        <script type="text/javascript" src="../../vendor/avalon/avalon.js"></script>
        <script type="text/javascript">
            //avalon.library("test");
            var tabVm, btnVm
            avalon.component("test:tab", {
                $slot: "content",//或者使用插入点机制
                $template: '<div ms-click="onClick">{{content|html}}</div>',
                content: "",
                _element: {},
                $skipArray: ["_element"],
                onClick:function(){

                },
                $ready: function (vm, el) {
                    vm.onClick=function(){
                        console.log('想要在点击组件的时候改变子组件str的值 （不给子组件手动配置$id，也不用/^button/i.test()匹配');
                    }
                    vm.onInit(vm)
                }
            });
           
            avalon.component("test:button", {
                str: "AAA",
                $template: '<span>{{ str }}</span>',
                _element: {},
                $skipArray: ["_element"],
                $ready: function (vm, el) {
                    vm.$watch("str", function(a){
                        console.log(a)
                    })
                  
                }
            });
        </script>
        <script type="text/javascript">
            avalon.ready(function () {
                var vm = avalon.define({
                    $id: "test",

                    str: 111
                });
                avalon.scan(document.body, vm);
            });
        </script>
    </head>
    <body ms-controller="test">
    <test:tab>
        <test:button ms-attr-str="str"></test:button>
    </test:tab>
</body>
</html>