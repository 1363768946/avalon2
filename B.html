<!DOCTYPE html>
<html>
    <head>
        <title></title>

        <style type="text/css">
            [ms-controller],[ms-important],.ms-controller, .ms-important{visibility:hidden;}
        </style>

    </head>
    <body>
        <script type="avalon" id="testTemplate">
            <div>
            <div ms-repeat-r1="bb[current]">
            {{r1.a}}
            </div>
            </div>

            -------

            <div>
            {{bb[current][0].a}}
            </div>
        </script>

        <div ms-controller="testModel" ms-include="'testTemplate'"></div>

        <script type="text/javascript" src="avalon.js"></script>

        <script type="text/javascript">
            avalon.ready(function () {
                var model = avalon.define({
                    $id: "testModel",
                    bb: [[{'a': 'c1'}], [{'a': 'd2'}], [{'a': 'e3'}]],
                    current: 0
                });

                avalon.scan(document.body);
    //  model.current=1;
    //
                setTimeout(function () {
    //      alert(1);
                    //model.bb = [[{'a':'C1'}],[{'a':'D2'}],[{'a':'E3'}]];
                    model.current = 2;

                }, 1000);
            });

        </script>

    </body>
</html>